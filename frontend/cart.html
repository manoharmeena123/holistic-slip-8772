<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- Navbar Props -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!-- Font Awesome Kit -->
    <script
      src="https://kit.fontawesome.com/db1cefd446.js"
      crossorigin="anonymous"
    ></script>
    <!-- Lato Fonts impoting -->
    <!-- Roboto Slab Importing -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@300&family=Roboto+Slab:wght@300&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/cart.css" />
  </head>
  <body>
    <div class="container">
      <!-- NAVBAR -->
      <div id="navbar"></div>
        <!-- NAVBAR ENDS here -->
      </div>
      <!-- Heading + item count -->
      <div id="itemCount">
        <h3>Your Basket( <span id="cartLen1">0</span> items)</h3>
        <hr />
      </div>
      <!-- Cart Table -->
      <div id="cartTable">
        <table>
          <thead>
            <tr>
              <th id="th1">ITEM DESCRPTION</th>
              <th id="th2">UNIT PRICE</th>
              <th id="th3">QUANTITY</th>
              <th id="th4">SUBTOTAL</th>
              <th id="th5">SAVINGS</th>
            </tr>
          </thead>
          <!-- TD Dummy Entries Starts  -->
          <tbody></tbody>
        </table>
        <hr />
        <!-- Cart Table END-->
        <!-- EMPTY BASKET BUTTON - OFFER & SUBTOTAL -->
        <div id="checkOutDiv">
          <div id="emptyBtnDiv">
            <div>
              <button id="emptyBasketBtn">
                <i class="fas fa-shopping-basket"></i> EMPTY BASKET
              </button>
            </div>
            <div>
              <button id="continueShopBtn">CONTINUE SHOPPING</button>
            </div>
          </div>
          <div id="offerDiv">
            <div>
              <h4>Offer on Natural Organic Khapli Atta</h4>
              <p>
                Buy Natural Organic Khapli Atta, 5 kg and get Natural...
              </p>
            </div>
          </div>
          <div id="totalDiv">
            <div>
              <div id="piggySub">
                <div id="subTotalDiv">
                  <div>
                    <p>Subtotal</p>
                    <!-- SUBTOTAL DYNAMIC -->
                    <p>Rs. <span id="subTotalSum">0.00</span></p>
                  </div>
                  <div>
                    <p>Total Discount</p>
                    <p>Rs. <span id="subTotalDis">0.00</span></p>
                  </div>
                  <hr />
                  <div>
                    <!-- Dynamic Total -->
                    <h1>TOTAL</h1>
                    <h1>Rs.<span id="grandTotal1"> 0.00</span></h1>
                  </div>
                </div>
                <div id="piggyIconDiv">
                  <div id="piggy"><i class="fas fa-piggy-bank"></i></div>
                  <!-- Total Saved Amt Dynamic -->
                  <p>You Saved Rs. <span id="savedMoney"> 0.00</span></p>
                </div>
              </div>
              <!-- Dynamic Price -->
              <div id="checkOutBtnDiv">
                <p>
                  *For this order: Accepted food coupon is Rs.<span
                    id="grandTotal2"
                  >
                    0.00</span
                  >
                </p>
                <hr />
                <div>
                  <button id="checkoutBtn">CHECKOUT</button>
                </div>
                <p>**Actual delivery charges computed at checkout time</p>
              </div>
            </div>
          </div>
        </div>
        <!-- Cart Ends Here -->
        <hr
          style="
            height: 20px;
            background-color: #f3f3f3;
            border: 1px solid #f3f3f3;
          "
        />
        <hr
        style="
            height: 20px;
            background-color: #f3f3f3;
            border: 1px solid #f3f3f3;
          ">
        <div id="add">
       <form id="form">
        <label for="">Name</label><br>
        <input type="name" name="" id="name" placeholder="Name"><br>
        <label for="">Email</label><br>
        <input type="email" placeholder="Email" id="email"><br>
        <label for="">Mobile</label><br>
        <input type="number" placeholder="Enter mobile number" id="mobile"><br>
        <label for="">City</label><br>
        <input type="text" placeholder="Enter city" id="city"><br>
        <label for="">Pincode</label><br>
        <input type="number" placeholder="Pincode" id="pincode"><br>
        <label for="">State</label><br>
        <input type="text" placeholder="Enter state" id="state"><br>
        <input type="submit" value="submit" id="btn">

       </form>
      <div id="address">
        <h2>Address of Users!</h2>
        <div id="data"></div>
      </div>
      </div>
        <!-- FOOTER Starts here -->
        <div id="footer">
      <div id="footer1">
            <h3>bigbasket</h3>
            <p>About Us</p>
            <p>In News</p>
            <p>Green bigbasket</p>
            <p>Privacy Policy</p>
            <p>Affiliate</p>
            <p>Terms and Conditions</p>
            <p>Careers At bigbasket</p>
            <p>bb Instant</p>
            <p>bb Daily</p>
            <p>bb Blog</p>
          </div>
          <div id="footer2">
            <h3>Help</h3>
            <p>FAQs</p>
            <p>Contact Us</p>
            <p>bb Wallet FAQs</p>
            <p>bb Wallet T&Cs</p>
            <p>Affiliate</p>
            <p>Vendor Connect</p>
            <p>E-Invoice Compliance for bigbasket Vendors</p>
          </div>
          <div id="footer3">
            <h3 style="margin-bottom: 30px">Download App</h3>
            <img
              src="https://www.bbassets.com/static/v2476/uiv2/images/Google-App-store-icon.png"
              alt="googleBigBasket"
              style="width: 60%; object-fit: contain"
            />
            <br />
            <br />
            <img
              src="https://www.bbassets.com/static/v2476/uiv2/images/Apple-App-store-icon.png"
              alt="AppleBigBasket"
              style="width: 60%; object-fit: contain"
            />
          </div>
          <div id="footer4">
            <h3>Get Social With Us</h3>
            <div>
              <img
                src="https://cdn3.iconfinder.com/data/icons/capsocial-round/500/facebook-512.png"
                alt="fb-link"
                style="width: 45px"
              />
              <img
                src="https://cdn-icons-png.flaticon.com/512/145/145808.png"
                alt="pinterest"
                style="width: 45px"
              />
              <img
                src="https://cdn4.iconfinder.com/data/icons/social-media-icons-the-circle-set/48/twitter_circle-512.png"
                alt="twitterIcon"
                style="width: 45px"
              />
              <img
                src="https://www.freepnglogos.com/uploads/instagram-icon-png/instagram-icon-suzem-limited-make-known-20.png"
                alt="InstaIcon"
                style="width: 45px"
              />
            </div>
          </div> 
        </div>
        <!-- FOOTER Ends here -->
      </div>
      <!-- Container Ends here -->
    </div>
  </body>
</html>

<script type="module">

import {navbar,footer} from "./components/index.js"
    
    let nav_div = document.getElementById("navbar")
    nav_div.innerHTML = navbar();
  
    let footer_div = document.getElementById("footer")
    footer_div.innerHTML = footer();

  var cart = JSON.parse(localStorage.getItem("cartValue")) || [];
  console.log(cart);

   document.querySelector('#cartLen').innerHTML=cart.length;

   document.querySelector('#cartLen1').innerHTML=cart.length;

  showCart(cart);

  document.querySelector("#continueShopBtn").addEventListener("click", function () {
      console.log("here")
      window.location.href = "bakery.html";
    });

    document.querySelector("#emptyBasketBtn").addEventListener("click", function () {
      console.log("here")
      cart = []
      showCart(cart)
      localStorage.setItem("cartValue", JSON.stringify(cart))  /////===================================================================>
    window.location.reload()
    });
    document.querySelector("#checkoutBtn").addEventListener("click", function () {
      // console.log("here")
      window.location.href = "payment.html"

     
    });

  function showCart(cart) {
    var totalSub = 0;
    var totalDis = 0;
    cart.map(function (elem)  {
      var row = document.createElement("tr");
      var td1 = document.createElement("td");
      td1.textContent = elem.name;
      var td2 = document.createElement("td");
      td2.textContent = "Rs. " + (elem.Price);
      var td3 = document.createElement("td");
      td3.textContent = elem.qty;
      var td4 = document.createElement("td");
      td4.textContent = "Rs. " + elem.Price;
      var td5 = document.createElement("td");
      td5.textContent = "Rs. " +(elem.Stricked - elem.Price);
      // console.log(parseInt(elem.mrp));
      totalSub +=elem.Price;
      totalDis +=(elem.Stricked - elem.Price);
      console.log(totalDis);
      totalDis = row.append(td1, td2, td3, td4, td5);
      document.querySelector("tbody").append(row);

      // console.log(typeof totalSub);
      // console.log(td4);
      printSubtotal(totalSub);
      printDis(totalDis);
      grandTotal(totalSub, totalDis);
    });
  }
  // var bagLen = document.querySelector("#bagLen");
  // var cartLen = document.querySelector("#cartLen");
  // bagLen.textContent = cart.length;
  // cartLen.textContent = cart.length;
  
  let yourbascket = document.querySelector('#cartLen').innerHTML=cart.length;

  function printSubtotal(totalSub) {
    document.querySelector("#subTotalSum").textContent = totalSub;
    // console.log(totalSub);
  }
  function printDis(totalDis) {
    document.querySelector("#subTotalDis").textContent = totalDis;
    document.querySelector("#savedMoney").textContent = totalDis;
    // console.log(totalSub);
  }
  function grandTotal(totalSub, totalDis) {
    document.querySelector("#grandTotal1").textContent = totalSub;
    document.querySelector("#grandTotal2").textContent = totalDis;
  }
  function openNav() {
    document.getElementById("mySidepanel").style.width = "250px";
  }

  /* Set the width of the sidebar to 0 (hide it) */
  function closeNav() {
    document.getElementById("mySidepanel").style.width = "0";
  }

  function openPerson() {
    document.getElementById("personDropdown").classList.toggle("show");
  }

  // Close the dropdown if the user clicks outside of it
  window.onclick = function (e) {
    if (!e.target.matches(".personbtn")) {
      var myDropdown = document.getElementById("personDropdown");
      if (myDropdown.classList.contains("show")) {
        myDropdown.classList.remove("show");
      }
    }
  };
  let arr =[]
  let form =  document.querySelector("#form")
  form.addEventListener("submit",formData)

  async function formData(event){
    event.preventDefault()
      let name = document.getElementById("name").value
  let email = document.getElementById("email").value
  let mobile= document.getElementById("mobile").value
  let city = document.getElementById("city").value
  let pincode = document.getElementById("pincode").value
  let state = document.getElementById("state").value
  let obj ={
    name,email,mobile,city,pincode,state,
  }
arr.push(obj)

  localStorage.setItem("formdata",JSON.stringify(arr))
  location.reload();

  }

  //======================================================================>
  let formdata = JSON.parse(localStorage.getItem("formdata"));
display(formdata);

function display(formdata) {
  formdata.forEach(ele => {
    let div = document.createElement("div");
    let name = document.createElement("p");
    name.innerText = "Name: " + ele.name;
    let email = document.createElement("p");
    email.innerText = "Email: " + ele.email;
    let mobile = document.createElement("p");
    mobile.innerText = "Mob: " + ele.mobile;
    let city = document.createElement("p");
    city.innerText = "City: " + ele.city;
    let pincode = document.createElement("p");
    pincode.innerText = "Pincode: " + ele.pincode;
    let state = document.createElement("p");
    state.innerText = "State: " + ele.state;
    div.append(name, email, mobile, city, pincode, state);
    document.querySelector("#address").append(div);
  });
}

</script>
<!-- <script type="module"> 
  import {navbar,footer} from "./components/index.js"
    
    let nav_div = document.getElementById("navbar")
    nav_div.innerHTML = navbar();
  
    let footer_div = document.getElementById("footer")
    footer_div.innerHTML = footer();
  </script> -->
